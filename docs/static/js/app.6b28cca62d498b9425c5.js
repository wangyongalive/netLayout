webpackJsonp([1],{CRCK:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("BO1k"),a=n.n(r),s=n("Gu7T"),o=n.n(s),l=n("Ml+6"),c=n("3mde"),h=n.n(c),d=(n("wVBE"),n("GqC1")),u=n("a4i9"),m=n.n(u),p=n("+G5l"),f=n("RiDx"),g={name:"webgl",data:function(){return{fov:45,near:1,far:1e5,gData1:null,gData2:null,gData3:null,forceSate:{},flag:!0}},mounted:function(){this.camera=null,this.scene=null,this.controls=null,this.renderer=null,this.stats=null,this.raycaster=null,this.mouse=null,this.InterSelected=null,this.light=null,this.color=this.getColor(),this.labelRenderer=null,this.init(),this.computed(),this.statsInit(),this.animate(),this.guiInit()},methods:{init:function(){this.mouse=new l.Vector2,this.raycaster=new l.Raycaster;var e=window.innerWidth,t=window.innerHeight;this.scene=new l.Scene,this.camera=new l.PerspectiveCamera(this.fov,e/t,this.near,this.far),this.camera.up=new l.Vector3(0,1,0),this.camera.layers.enable(0),this.camera.layers.enable(1),this.camera.layers.enable(2),this.camera.layers.enable(3),this.camera.position.z=2299,this.camera.position.x=-1906,this.camera.position.y=-280,this.camera.lookAt(this.scene.position),this.light=new l.AmbientLight(16777215),this.light.position.set(1,1,1),this.light.layers.enable(0),this.light.layers.enable(1),this.light.layers.enable(2),this.light.layers.enable(3),this.scene.add(this.light),this.renderer=new l.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(new l.Color(3158064)),this.renderer.setSize(e,t),this.renderer.setPixelRatio(window.devicePixelRatio),document.getElementById("WebGL-output").appendChild(this.renderer.domElement),this.labelRenderer=new d.CSS2DRenderer,this.labelRenderer.setSize(window.innerWidth,window.innerHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,document.getElementById("WebGL-output").appendChild(this.labelRenderer.domElement),this.controls=new h.a(this.camera,this.$refs.WebGL),this.controls.rotateSpeed=2.5,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("mousemove",this.onDocumentMouseMove,!1)},addObj:function(e,t){var n=this,i=this,r=new l.SphereGeometry(10,10,10);e.nodes.forEach(function(e){var a=new l.Mesh(r,new l.MeshLambertMaterial({color:i.color(t),opacity:.5,transparent:!0}));a.layers.set(t),a.position.set(e.x,e.y,500*t),n.scene.add(a)}),e.links.forEach(function(e){var i=new l.LineBasicMaterial({opacity:.5,transparent:!0,vertexColors:!0}),r=new l.Color(255),a=new l.Color(16711680),s=new l.Geometry;s.vertices.push(new l.Vector3(e.source.x,e.source.y,500*t)),s.vertices.push(new l.Vector3(e.target.x,e.target.y,500*t)),s.colors.push(r,a);var o=new l.Line(s,i);o.layers.set(t),n.scene.add(o)});var a=new l.PlaneGeometry(1e3,1e3,10,10),s=new l.Mesh(a,new l.MeshLambertMaterial({color:2105376,side:l.DoubleSide}));s.position.x=0,s.position.y=0,s.position.z=500*t,s.layers.set(t),this.scene.add(s);var o=document.createElement("div");o.className="label th"+t,o.textContent="第"+t+"层",o.style.marginTop="-1em";var c=new d.CSS2DObject(o);c.position.set(0,0,0),s.add(c)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.render(),self.stats.begin(),self.stats.end()},render:function(){this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObjects(this.scene.children);e.length>0?this.InterSelected!=e[0].object&&(this.InterSelected&&(this.InterSelected.material.opacity=this.InterSelected.currentOpacity),this.InterSelected=e[0].object,this.InterSelected.currentOpacity=this.InterSelected.material.opacity,this.InterSelected.material.opacity=1):(this.InterSelected&&(this.InterSelected.material.opacity=this.InterSelected.currentOpacity),this.InterSelected=null),this.flag&&this.forceSate[0]&&this.forceSate[1]&&this.forceSate[2]&&(this.flag=!1,this.commonNode(this.gData1,this.gData2),this.commonNode(this.gData1,this.gData3),this.commonNode(this.gData2,this.gData3)),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},guiInit:function(){var e=this,t={"第一层":!0,"第二层":!0,"第三层":!0},n=new p.a;n.add(t,"第一层").onChange(function(t){e.camera.layers.toggle(0),e.lableToggle(0,t),e.lineToggle(0,t)}),n.add(t,"第二层").onChange(function(t){e.camera.layers.toggle(1),e.lableToggle(1,t),e.lineToggle(1,t)}),n.add(t,"第三层").onChange(function(t){e.camera.layers.toggle(2),e.lableToggle(2,t),e.lineToggle(2,t)})},statsInit:function(){self.stats=new m.a,self.stats.showPanel(0),document.body.appendChild(stats.dom)},onDocumentMouseMove:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1},lableToggle:function(e,t){document.getElementsByClassName("label th"+e)[0].style.visibility=!0===t?"visible":"hidden"},computed:function(){var e=100;this.gData1={nodes:[].concat(o()(Array(e).keys())).map(function(e){return{id:e,groups:0}}),links:[].concat(o()(Array(e).keys())).filter(function(e){return e}).map(function(e){return{source:e,target:Math.round(Math.random()*(e-1))}})},this.gData2={nodes:[].concat(o()(Array(e).keys())).map(function(e){return{id:e+90,groups:1}}),links:[].concat(o()(Array(e).keys())).filter(function(e){return e}).map(function(e){return{source:e+90,target:Math.round(Math.random()*(e-1))+90}})},this.gData3={nodes:[].concat(o()(Array(e).keys())).map(function(e){return{id:e+180,groups:2}}),links:[].concat(o()(Array(e).keys())).filter(function(e){return e}).map(function(e){return{source:e+180,target:Math.round(Math.random()*(e-1))+180}})},this.forceLayout(this.gData1,0),this.forceLayout(this.gData2,1),this.forceLayout(this.gData3,2)},forceLayout:function(e,t){var n=this,i=f.d().force("link",f.b().id(function(e){return e.id})).force("charge",f.c()).force("center",f.a(0,0));i.nodes(e.nodes).on("tick",function(){i.alpha()<=.01&&(n.addObj(e,t),i.stop(),n.forceSate[t]=!0)}),i.force("link").links(e.links)},getColor:function(){return f.e(f.f)},commonNode:function(e,t){var n=this,i=e.nodes.map(function(e){return e.id}),r=t.nodes.map(function(e){return e.id});i.filter(function(e){return r.includes(e)}).forEach(function(i){var r={},s={},o=!0,l=!1,c=void 0;try{for(var h,d=a()(e.nodes);!(o=(h=d.next()).done);o=!0){var u=h.value;if(u.id==i){r={x:u.x,y:u.y,z:500*u.groups,groups:u.groups};break}}}catch(e){l=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw c}}var m=!0,p=!1,f=void 0;try{for(var g,y=a()(t.nodes);!(m=(g=y.next()).done);m=!0){var w=g.value;if(w.id==i){s={x:w.x,y:w.y,z:500*w.groups,groups:w.groups};break}}}catch(e){p=!0,f=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw f}}n.drawLine(r,s)})},drawLine:function(e,t){var n=new l.LineBasicMaterial({opacity:.5,transparent:!0,vertexColors:!0}),i=new l.Color(this.color(e.groups)),r=new l.Color(this.color(t.groups)),a=new l.Geometry;a.vertices.push(new l.Vector3(e.x,e.y,e.z)),a.vertices.push(new l.Vector3(t.x,t.y,t.z)),a.colors.push(i,r);var s=new l.Line(a,n);s.name=e.groups+"_"+t.groups,s.layers.set(3),this.scene.add(s)},lineToggle:function(e,t){console.log(e);this.scene.children.forEach(function(n){n.name.includes(""+e)&&(n.visible=t)})}}},y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"WebGL",attrs:{id:"WebGL-output"}})},staticRenderFns:[]};var w={name:"App",components:{HelloWorld:n("VU/8")(g,y,!1,function(e){n("wuid")},"data-v-8b0561ae",null).exports}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("HelloWorld")],1)},staticRenderFns:[]};var b=n("VU/8")(w,v,!1,function(e){n("CRCK")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:b},template:"<App/>"})},wuid:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6b28cca62d498b9425c5.js.map